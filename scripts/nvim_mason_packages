#!/usr/bin/env -S nvim -l
print('###############################')
vim.print(vim.fn.stdpath('data'))
vim.print( vim.cmd.set('packpath?'))

vim.print( 'Mason Packages' )
vim.cmd.packadd('mason.nvim')
local mason_install = "/usr/local/share"

local mason = require("mason")
mason.setup({
  install_root_dir = mason_install,
  PATH = "skip",
})

print( 'Mason install_root_dir: ' .. mason_install)


local registry = require("mason-registry")


registry.refresh()
local packages = registry.get_all_packages()
local package = registry.get_package("lua-language-server")
-- Install with callback
package:install(nil, function(success, result)
    if success then
        print("Successfully installed " .. package.name)
    else
        print("Failed to install " .. package.name .. ": " .. result)
    end
end)


