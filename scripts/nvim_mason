#!/usr/bin/env -S nvim -l
-- https://mason-registry.dev/registry/list
--
-- htmx
-- 'gh-actions-language-server', requires go
local bins = {
  'jq-lsp',
  'ast-grep',
  'bash-language-server',
  'copilot-language-server',
  'css-lsp',
  'harper-ls',
  'html-lsp',
  'json-lsp',
  'kulala-fmt',
  'lua-language-server',
  'marksman',
  'shellcheck',
  'shfmt',
  'stylelint-lsp',
  'tombi',
  'typescript-language-server',
  'yaml-language-server',
  }
-- unset at scripts end
vim.uv.os_setenv("XDG_DATA_HOME", "/usr/local/share")
-- /usr/local/share/nvim/site/pack/core/opt/
vim.pack.add({
 'https://github.com/mason-org/mason.nvim',
  })
vim.uv.sleep(1000) 
local ok_mason, mason = pcall(require, 'mason')
if ok_mason then
  print( 'required Mason' )
  mason.setup(
    {
      install_root_dir = '/usr/local/share/mason',
      PATH = 'skip',
    }
  )
-- local registry = require("mason-registry")
-- registry.update()
vim.uv.sleep(1000) 
for _, bin in ipairs(bins) do
vim.uv.sleep(1000) 
vim.cmd.MasonInstall(bin)
vim.uv.sleep(1000) 
end
else
  print( '- ABORT!!' )
end

vim.uv.os_unsetenv("XDG_DATA_HOME")


